@tailwind base;
@tailwind components;
@tailwind utilities;

/* NewYorker custom font */
@font-face {
  font-family: 'NewYorker';
  src: url('/fonts/NewYorker-Swedish-v3_1.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

:root {
  /* Font stacks - reduced to 2 fonts for cleaner design */
  --font-heading: 'NewYorker', Georgia, serif;
  --font-body: 'DM Sans', system-ui, -apple-system, sans-serif;
  --font-mono: 'JetBrains Mono', ui-monospace, monospace;

  /* ========================================
     SEMANTIC COLOR PALETTE - Light Mode
     5 core colors for refined, consistent design
     ======================================== */
  --ink: #0c0c0c;           /* Primary text */
  --paper: #fafaf9;         /* Background */
  --stone: #78716c;         /* Secondary text */
  --accent: #1d4ed8;        /* CTA & links */
  --highlight: #fef3c7;     /* Highlighting */

  /* Light mode colors - refined palette (legacy support) */
  --foreground: #0f172a;
  --background: #f8fafc;
  --muted: #64748b;
  --border: #e2e8f0;
  --accent-light: #3b82f6;
  --bg-dynamic: #f8fafc;
  --bg-card: #ffffff;
  --bg-card-gradient: linear-gradient(180deg, #ffffff 0%, #fafbfc 100%);
  --bg-hover: #f1f5f9;
  --text-dynamic: #0f172a;
  --text-secondary: #475569;
  --text-muted: #94a3b8;

  /* Shadows - light mode */
  --shadow-card: 0 1px 3px rgba(15, 23, 42, 0.04), 0 1px 2px rgba(15, 23, 42, 0.06);
  --shadow-card-hover: 0 10px 40px -10px rgba(15, 23, 42, 0.1), 0 4px 12px -2px rgba(15, 23, 42, 0.05);
  --shadow-elevated: 0 20px 50px -12px rgba(15, 23, 42, 0.15);
}

.dark {
  /* ========================================
     SEMANTIC COLOR PALETTE - Dark Mode
     ======================================== */
  --ink: #e6edf3;           /* Primary text */
  --paper: #0d1117;         /* Background */
  --stone: #8b949e;         /* Secondary text */
  --accent: #58a6ff;        /* CTA & links */
  --highlight: #1c1917;     /* Highlighting */

  /* Dark mode - GitHub-inspired rich dark (legacy support) */
  --foreground: #e6edf3;
  --background: #0d1117;
  --muted: #8b949e;
  --border: #30363d;
  --accent-light: #79c0ff;
  --bg-dynamic: #0d1117;
  --bg-card: #161b22;
  --bg-card-gradient: linear-gradient(180deg, #1c2128 0%, #161b22 100%);
  --bg-hover: #21262d;
  --text-dynamic: #e6edf3;
  --text-secondary: #8b949e;
  --text-muted: #6e7681;

  /* Shadows - dark mode */
  --shadow-card: 0 1px 3px rgba(0, 0, 0, 0.3), 0 1px 2px rgba(0, 0, 0, 0.2);
  --shadow-card-hover: 0 10px 40px -10px rgba(0, 0, 0, 0.5), 0 4px 12px -2px rgba(0, 0, 0, 0.3);
  --shadow-elevated: 0 20px 50px -12px rgba(0, 0, 0, 0.6);
}

* {
  box-sizing: border-box;
}

/* ========================================
   BASE HTML/BODY MOBILE SETUP
   ======================================== */
html {
  /* Prevent horizontal overflow on all devices */
  overflow-x: hidden;
  /* Smooth scrolling with reduced motion support */
  scroll-behavior: smooth;
  /* Prevent iOS text size adjustment */
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

body {
  color: var(--foreground);
  background: var(--background);
  font-feature-settings: "rlig" 1, "calt" 1;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  transition: background-color 0.2s ease, color 0.2s ease;
  /* Prevent horizontal overflow */
  overflow-x: hidden;
  /* Ensure full width without horizontal scroll */
  width: 100%;
  max-width: 100vw;
  /* Support for safe areas (notched phones) */
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

/* ========================================
   RESPONSIVE TYPOGRAPHY SYSTEM
   Mobile-first font scaling
   ======================================== */

/* Base mobile typography (320px+) */
html {
  font-size: 14px;
}

/* Small phones (375px+) */
@media (min-width: 375px) {
  html {
    font-size: 15px;
  }
}

/* Large phones (428px+) */
@media (min-width: 428px) {
  html {
    font-size: 16px;
  }
}

/* Tablets (768px+) */
@media (min-width: 768px) {
  html {
    font-size: 16px;
  }
}

/* Desktop (1024px+) */
@media (min-width: 1024px) {
  html {
    font-size: 16px;
  }
}

/* Responsive text utilities */
.text-responsive-xs {
  font-size: clamp(0.625rem, 0.5rem + 0.5vw, 0.75rem);
}

.text-responsive-sm {
  font-size: clamp(0.75rem, 0.625rem + 0.5vw, 0.875rem);
}

.text-responsive-base {
  font-size: clamp(0.875rem, 0.75rem + 0.5vw, 1rem);
}

.text-responsive-lg {
  font-size: clamp(1rem, 0.875rem + 0.5vw, 1.125rem);
}

.text-responsive-xl {
  font-size: clamp(1.125rem, 1rem + 0.5vw, 1.25rem);
}

.text-responsive-2xl {
  font-size: clamp(1.25rem, 1rem + 1vw, 1.5rem);
}

.text-responsive-3xl {
  font-size: clamp(1.5rem, 1.25rem + 1vw, 1.875rem);
}

.text-responsive-4xl {
  font-size: clamp(1.875rem, 1.5rem + 1.5vw, 2.25rem);
}

/* ========================================
   ENHANCED TYPOGRAPHY - Stronger Hierarchy
   ======================================== */

/* Display headline - fluid sizing with tight tracking */
.text-headline {
  font-size: clamp(2rem, 5vw, 3.5rem);
  letter-spacing: -0.03em;
  line-height: 1.1;
  font-weight: 700;
  font-optical-sizing: auto;
}

/* Large headline variant */
.text-headline-lg {
  font-size: clamp(2.5rem, 6vw, 4.5rem);
  letter-spacing: -0.035em;
  line-height: 1.05;
  font-weight: 700;
  font-optical-sizing: auto;
}

/* Small headline variant */
.text-headline-sm {
  font-size: clamp(1.5rem, 4vw, 2.5rem);
  letter-spacing: -0.025em;
  line-height: 1.15;
  font-weight: 600;
  font-optical-sizing: auto;
}

/* Body text - optimized for reading */
.text-body {
  font-size: 1.0625rem; /* 17px - slightly larger than 16px for better readability */
  line-height: 1.8;
  letter-spacing: 0.01em;
}

/* Body text large variant */
.text-body-lg {
  font-size: 1.1875rem; /* 19px */
  line-height: 1.75;
  letter-spacing: 0.005em;
}

/* Body text small variant */
.text-body-sm {
  font-size: 0.9375rem; /* 15px */
  line-height: 1.7;
  letter-spacing: 0.015em;
}

/* Caption/label text */
.text-caption {
  font-size: 0.8125rem; /* 13px */
  line-height: 1.5;
  letter-spacing: 0.02em;
  text-transform: uppercase;
  font-weight: 500;
}

/* Display text with optical sizing for large sizes */
.text-display {
  font-optical-sizing: auto;
  font-feature-settings: "kern" 1, "liga" 1, "calt" 1;
}

/* ========================================
   MOBILE & TOUCH DEVICE OPTIMIZATIONS
   ======================================== */

/* Prevent text selection on interactive elements */
button, [role="button"], a {
  -webkit-user-select: none;
  user-select: none;
}

/* Prevent callout on long-press (iOS) */
button, [role="button"], a, img {
  -webkit-touch-callout: none;
}

/* Ensure touch-manipulation on all buttons (prevents 300ms delay) */
button, [role="button"], a, input, select, textarea {
  touch-action: manipulation;
}

/* Touch devices: show active states instead of hover */
@media (hover: none) and (pointer: coarse) {
  /* Make hover-dependent actions visible by default */
  .group:hover .group-hover\:opacity-100,
  .hover\:opacity-100 {
    opacity: 1;
  }

  /* Larger minimum touch targets - WCAG 2.5.5 AAA */
  button:not(.btn-icon-sm),
  [role="button"]:not(.btn-icon-sm),
  a:not(.link-inline) {
    min-height: 44px;
    min-width: 44px;
  }

  /* Reduce animation complexity on mobile for battery/performance */
  .animate-float {
    animation-duration: 30s !important;
  }

  /* Disable hover transforms on touch devices */
  .card-interactive:hover,
  .news-card:hover {
    transform: none;
  }

  /* Use active state instead */
  .card-interactive:active,
  .news-card:active {
    transform: scale(0.98);
    transition-duration: 0.1s;
  }
}

/* Safe area insets for notched devices (iPhone X+, etc.) */
@supports (padding: max(0px)) {
  .safe-area-inset-bottom {
    padding-bottom: max(1rem, env(safe-area-inset-bottom));
  }

  .safe-area-inset-top {
    padding-top: max(0px, env(safe-area-inset-top));
  }

  .safe-area-inset-left {
    padding-left: max(0px, env(safe-area-inset-left));
  }

  .safe-area-inset-right {
    padding-right: max(0px, env(safe-area-inset-right));
  }

  /* Combined safe areas for full-bleed content */
  .safe-area-all {
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }
}

/* Prevent pull-to-refresh interference on scroll containers */
.overscroll-contain {
  overscroll-behavior: contain;
}

/* ========================================
   MOBILE CONTAINER & OVERFLOW CONTROL
   ======================================== */

/* Prevent any element from causing horizontal scroll */
.mobile-safe {
  max-width: 100%;
  overflow-x: hidden;
}

/* Cards that should never overflow */
.card-mobile-safe {
  max-width: 100%;
  overflow: hidden;
  word-wrap: break-word;
  overflow-wrap: break-word;
}

/* Text that might overflow on small screens */
.text-mobile-safe {
  word-wrap: break-word;
  overflow-wrap: break-word;
  hyphens: auto;
  -webkit-hyphens: auto;
}

/* Mobile-specific breakpoint utilities */
@media (max-width: 374px) {
  /* iPhone SE and smaller */
  .hide-on-tiny {
    display: none !important;
  }

  .text-tiny-smaller {
    font-size: 0.8125rem !important;
  }

  .p-tiny-compact {
    padding: 0.75rem !important;
  }
}

@media (max-width: 389px) {
  /* Standard iPhones (375px) */
  .hide-on-small {
    display: none !important;
  }
}

/* ========================================
   MOBILE TOUCH TARGETS
   ======================================== */

/* Minimum touch target class for icons/small buttons */
.touch-target-min {
  position: relative;
  min-width: 44px;
  min-height: 44px;
}

/* Expand touch area without changing visual size */
.touch-target-expand::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: max(100%, 44px);
  height: max(100%, 44px);
}

/* Small icon button that still meets touch requirements */
.btn-icon-sm {
  position: relative;
  width: 32px;
  height: 32px;
}

.btn-icon-sm::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 44px;
  height: 44px;
}

/* Inline links that don't need 44px targets */
.link-inline {
  min-width: auto;
  min-height: auto;
}

/* Minimal scrollbar */
::-webkit-scrollbar {
  width: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: #ddd;
  border-radius: 3px;
}

.dark ::-webkit-scrollbar-thumb {
  background: #444;
}

::-webkit-scrollbar-thumb:hover {
  background: #bbb;
}

.dark ::-webkit-scrollbar-thumb:hover {
  background: #555;
}

/* Animations */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateX(-8px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

.animate-fade-in {
  animation: fadeIn 0.3s ease-out forwards;
}

.animate-slide-in {
  animation: slideIn 0.3s ease-out forwards;
}

.animate-pulse-subtle {
  animation: pulse 2s ease-in-out infinite;
}

/* Stagger children animations */
.stagger-children > * {
  opacity: 0;
  animation: fadeIn 0.3s ease-out forwards;
}

.stagger-children > *:nth-child(1) { animation-delay: 0ms; }
.stagger-children > *:nth-child(2) { animation-delay: 50ms; }
.stagger-children > *:nth-child(3) { animation-delay: 100ms; }
.stagger-children > *:nth-child(4) { animation-delay: 150ms; }
.stagger-children > *:nth-child(5) { animation-delay: 200ms; }
.stagger-children > *:nth-child(6) { animation-delay: 250ms; }
.stagger-children > *:nth-child(7) { animation-delay: 300ms; }
.stagger-children > *:nth-child(8) { animation-delay: 350ms; }
.stagger-children > *:nth-child(9) { animation-delay: 400ms; }
.stagger-children > *:nth-child(10) { animation-delay: 450ms; }

/* Line clamp */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Hover transitions */
.hover-lift {
  transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease;
}

.hover-lift:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

.dark .hover-lift:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

/* Focus styles */
button:focus-visible,
a:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
}

/* Dark mode background */
.dark body {
  background: #0a0a0a;
}

/* Skeleton shimmer animation */
@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.skeleton-shimmer {
  background: linear-gradient(
    90deg,
    rgba(0, 0, 0, 0) 0%,
    rgba(0, 0, 0, 0.05) 50%,
    rgba(0, 0, 0, 0) 100%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

.dark .skeleton-shimmer {
  background: linear-gradient(
    90deg,
    rgba(255, 255, 255, 0) 0%,
    rgba(255, 255, 255, 0.08) 50%,
    rgba(255, 255, 255, 0) 100%
  );
  background-size: 200% 100%;
}

/* Font classes */
.font-heading {
  font-family: var(--font-heading), serif;
}

.font-body {
  font-family: var(--font-body), sans-serif;
}

.font-mono {
  font-family: var(--font-mono), monospace;
}

/* Liquid background filter */
.liquid-bg-filter {
  filter: url(#liquid-filter);
}

/* Float animation */
@keyframes float {
  0%, 100% { transform: translate(0, 0); }
  50% { transform: translate(-20px, 20px); }
}

.animate-float {
  animation: float 10s ease-in-out infinite;
}

/* Scale in animation */
@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.animate-scale-in {
  animation: scaleIn 0.2s ease-out forwards;
}

/* Glass panel effect */
.glass-panel {
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(12px);
}

/* ===============================
   Slack Chat Animations and Styles
   =============================== */

@keyframes slide-in-right {
  from {
    opacity: 0;
    transform: translateX(100%);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes bounce-in {
  0% {
    opacity: 0;
    transform: translateX(-50%) translateY(20px);
  }
  50% {
    transform: translateX(-50%) translateY(-5px);
  }
  100% {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}

.animate-slide-in-right {
  animation: slide-in-right 0.25s ease-out forwards;
}

.animate-bounce-in {
  animation: bounce-in 0.3s ease-out forwards;
}

/* Hide scrollbar but keep functionality */
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* Typing indicator dots animation */
@keyframes typing-bounce {
  0%, 60%, 100% {
    transform: translateY(0);
  }
  30% {
    transform: translateY(-4px);
  }
}

.typing-dot {
  animation: typing-bounce 1.4s ease-in-out infinite;
}

.typing-dot:nth-child(1) {
  animation-delay: 0s;
}

.typing-dot:nth-child(2) {
  animation-delay: 0.2s;
}

.typing-dot:nth-child(3) {
  animation-delay: 0.4s;
}

/* Prose overrides for chat messages */
.prose-chat a {
  color: #2563eb;
  text-decoration: none;
}

.dark .prose-chat a {
  color: #60a5fa;
}

.prose-chat a:hover {
  text-decoration: underline;
}

.prose-chat code {
  background-color: #f3f4f6;
  padding: 0.125rem 0.25rem;
  border-radius: 0.25rem;
  font-size: 0.75rem;
}

.dark .prose-chat code {
  background-color: #374151;
}

.prose-chat pre {
  background-color: #1f2937;
  color: #f9fafb;
  padding: 0.75rem;
  border-radius: 0.5rem;
  overflow-x: auto;
  font-size: 0.75rem;
}

.prose-chat strong {
  font-weight: 600;
}

.prose-chat em {
  font-style: italic;
}

.prose-chat del {
  text-decoration: line-through;
  color: #6b7280;
}

.dark .prose-chat del {
  color: #9ca3af;
}

/* Slide down animation for mobile search */
@keyframes slide-down {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-slide-down {
  animation: slide-down 0.2s ease-out forwards;
}

/* ===============================
   Micro-interactions
   =============================== */

/* Button press effect */
.btn-press {
  transition: transform 0.1s ease-out, box-shadow 0.1s ease-out;
}

.btn-press:active {
  transform: scale(0.97);
}

/* Card hover lift with subtle shadow */
.card-interactive {
  background: var(--bg-card-gradient);
  box-shadow: var(--shadow-card);
  transition: transform 0.25s cubic-bezier(0.4, 0, 0.2, 1),
              box-shadow 0.25s cubic-bezier(0.4, 0, 0.2, 1),
              border-color 0.2s ease-out;
}

.card-interactive:hover {
  transform: translateY(-3px) scale(1.005);
  box-shadow: var(--shadow-card-hover);
}

/* News card specific styling */
.news-card {
  background: var(--bg-card-gradient);
  box-shadow: var(--shadow-card);
  border: 1px solid var(--border);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
}

.news-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
  opacity: 0;
  transition: opacity 0.3s ease;
}

.news-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-card-hover);
  border-color: var(--accent);
}

.news-card:hover::before {
  opacity: 1;
}

.dark .news-card::before {
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.05), transparent);
}

/* Bookmark heartbeat animation */
@keyframes bookmark-pop {
  0% { transform: scale(1); }
  25% { transform: scale(1.3); }
  50% { transform: scale(0.9); }
  75% { transform: scale(1.1); }
  100% { transform: scale(1); }
}

.bookmark-animate {
  animation: bookmark-pop 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

/* Ripple effect */
@keyframes ripple {
  0% {
    transform: scale(0);
    opacity: 0.5;
  }
  100% {
    transform: scale(4);
    opacity: 0;
  }
}

.ripple-effect {
  position: relative;
  overflow: hidden;
}

.ripple-effect::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 20px;
  height: 20px;
  background: currentColor;
  border-radius: 50%;
  transform: translate(-50%, -50%) scale(0);
  opacity: 0;
}

.ripple-effect:active::after {
  animation: ripple 0.6s ease-out;
}

/* Pulse border for PDF button */
@keyframes pulse-border {
  0%, 100% { box-shadow: 0 0 0 0 rgba(30, 64, 175, 0.4); }
  50% { box-shadow: 0 0 0 4px rgba(30, 64, 175, 0); }
}

.pulse-on-hover:hover {
  animation: pulse-border 1.5s infinite;
}

.dark .pulse-on-hover:hover {
  animation: pulse-border 1.5s infinite;
  --tw-shadow-color: rgba(88, 166, 255, 0.4);
}

/* Icon rotation on hover */
.icon-rotate-hover {
  transition: transform 0.3s ease-out;
}

.group:hover .icon-rotate-hover,
.icon-rotate-hover:hover {
  transform: rotate(15deg);
}

/* Scale on hover */
.scale-hover {
  transition: transform 0.2s ease-out;
}

.scale-hover:hover {
  transform: scale(1.05);
}

/* Underline slide animation */
.underline-slide {
  position: relative;
}

.underline-slide::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  width: 0;
  height: 2px;
  background: currentColor;
  transition: width 0.3s ease-out;
}

.underline-slide:hover::after {
  width: 100%;
}

/* Focus ring animation */
.focus-ring-animate {
  transition: box-shadow 0.2s ease-out, outline 0.2s ease-out;
}

.focus-ring-animate:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
  box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
}

.dark .focus-ring-animate:focus-visible {
  box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.2);
}

/* ===============================
   Enhanced Stagger Animations
   =============================== */

/* Fade in up for lists */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(16px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in-up {
  animation: fadeInUp 0.4s ease-out forwards;
}

/* Stagger with longer delays for smoother appearance */
.stagger-smooth > * {
  opacity: 0;
  animation: fadeInUp 0.4s ease-out forwards;
}

.stagger-smooth > *:nth-child(1) { animation-delay: 0ms; }
.stagger-smooth > *:nth-child(2) { animation-delay: 75ms; }
.stagger-smooth > *:nth-child(3) { animation-delay: 150ms; }
.stagger-smooth > *:nth-child(4) { animation-delay: 225ms; }
.stagger-smooth > *:nth-child(5) { animation-delay: 300ms; }
.stagger-smooth > *:nth-child(6) { animation-delay: 375ms; }
.stagger-smooth > *:nth-child(7) { animation-delay: 450ms; }
.stagger-smooth > *:nth-child(8) { animation-delay: 525ms; }
.stagger-smooth > *:nth-child(9) { animation-delay: 600ms; }
.stagger-smooth > *:nth-child(10) { animation-delay: 675ms; }
.stagger-smooth > *:nth-child(n+11) { animation-delay: 750ms; }

/* Quick stagger for short lists */
.stagger-quick > * {
  opacity: 0;
  animation: fadeIn 0.2s ease-out forwards;
}

.stagger-quick > *:nth-child(1) { animation-delay: 0ms; }
.stagger-quick > *:nth-child(2) { animation-delay: 30ms; }
.stagger-quick > *:nth-child(3) { animation-delay: 60ms; }
.stagger-quick > *:nth-child(4) { animation-delay: 90ms; }
.stagger-quick > *:nth-child(5) { animation-delay: 120ms; }

/* ===============================
   UNIFIED MOTION LANGUAGE
   Standard animations for consistent UX
   =============================== */

/* 1. Reveal - for elements appearing (primary entrance animation) */
@keyframes reveal {
  from {
    opacity: 0;
    transform: translateY(12px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* 2. Reveal-subtle - for less prominent elements */
@keyframes reveal-subtle {
  from {
    opacity: 0;
    transform: translateY(6px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* 3. Expand - for collapsibles and accordions */
@keyframes expand {
  from {
    opacity: 0;
    max-height: 0;
  }
  to {
    opacity: 1;
    max-height: 1000px;
  }
}

/* 4. Collapse - reverse of expand */
@keyframes collapse {
  from {
    opacity: 1;
    max-height: 1000px;
  }
  to {
    opacity: 0;
    max-height: 0;
  }
}

/* Utility classes for unified animations */
.animate-reveal {
  animation: reveal 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.animate-reveal-subtle {
  animation: reveal-subtle 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.animate-expand {
  animation: expand 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  overflow: hidden;
}

.animate-collapse {
  animation: collapse 0.25s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  overflow: hidden;
}

/* Stagger delays for .stagger container (unified version) */
.stagger > * {
  opacity: 0;
  animation: reveal 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.stagger > *:nth-child(1) { animation-delay: 0ms; }
.stagger > *:nth-child(2) { animation-delay: 50ms; }
.stagger > *:nth-child(3) { animation-delay: 100ms; }
.stagger > *:nth-child(4) { animation-delay: 150ms; }
.stagger > *:nth-child(5) { animation-delay: 200ms; }
.stagger > *:nth-child(6) { animation-delay: 250ms; }
.stagger > *:nth-child(7) { animation-delay: 300ms; }
.stagger > *:nth-child(8) { animation-delay: 350ms; }
.stagger > *:nth-child(9) { animation-delay: 400ms; }
.stagger > *:nth-child(10) { animation-delay: 450ms; }
.stagger > *:nth-child(n+11) { animation-delay: 500ms; }

/* Interactive base class - unified hover/active states */
.interactive {
  transition: transform 0.15s ease-out,
              box-shadow 0.15s ease-out,
              background-color 0.15s ease-out,
              border-color 0.15s ease-out;
}

.interactive:hover {
  transform: translateY(-2px);
}

.interactive:active {
  transform: translateY(0) scale(0.98);
}

/* Interactive with shadow lift variant */
.interactive-lift {
  transition: transform 0.15s ease-out,
              box-shadow 0.15s ease-out,
              background-color 0.15s ease-out;
}

.interactive-lift:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.dark .interactive-lift:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.interactive-lift:active {
  transform: translateY(0) scale(0.98);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

/* Interactive scale variant (no Y translate) */
.interactive-scale {
  transition: transform 0.15s ease-out,
              box-shadow 0.15s ease-out,
              background-color 0.15s ease-out;
}

.interactive-scale:hover {
  transform: scale(1.02);
}

.interactive-scale:active {
  transform: scale(0.98);
}

/* Disable interactive animations on touch devices */
@media (hover: none) and (pointer: coarse) {
  .interactive:hover,
  .interactive-lift:hover,
  .interactive-scale:hover {
    transform: none;
    box-shadow: none;
  }

  .interactive:active,
  .interactive-lift:active,
  .interactive-scale:active {
    transform: scale(0.98);
  }
}

/* ===============================
   Touch-friendly Styles
   =============================== */

/* Ensure touch targets are at least 44x44px */
.touch-target {
  min-width: 44px;
  min-height: 44px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* Prevent text selection on interactive elements */
.no-select {
  -webkit-user-select: none;
  user-select: none;
}

/* Improved tap highlight for mobile */
@media (hover: none) {
  .tap-highlight {
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
  }

  .dark .tap-highlight {
    -webkit-tap-highlight-color: rgba(255, 255, 255, 0.1);
  }
}

/* ===============================
   Mobile-Specific Card Styles
   =============================== */

/* Responsive news card adjustments */
@media (max-width: 640px) {
  .news-card {
    /* Prevent card overflow on mobile */
    max-width: 100%;
    overflow: hidden;
    /* Slightly reduce padding on mobile */
    padding: 1rem;
  }

  /* Stack horizontal layouts on small screens */
  .news-card-content {
    flex-direction: column;
  }

  /* Full-width images on mobile */
  .news-card-image {
    width: 100%;
    height: auto;
    aspect-ratio: 16/9;
  }
}

/* Very small screens (iPhone SE) */
@media (max-width: 374px) {
  .news-card {
    padding: 0.75rem;
    border-radius: 0.5rem;
  }

  /* Reduce font sizes slightly */
  .news-card h3,
  .news-card .card-title {
    font-size: 0.9375rem;
    line-height: 1.3;
  }

  .news-card p,
  .news-card .card-description {
    font-size: 0.8125rem;
  }
}

/* Mobile input fields */
@media (max-width: 640px) {
  input[type="text"],
  input[type="email"],
  input[type="search"],
  input[type="password"],
  textarea,
  select {
    /* Prevent iOS zoom on focus (16px minimum) */
    font-size: 16px !important;
    /* Adequate height for touch */
    min-height: 44px;
    /* Full width on mobile */
    width: 100%;
  }
}

/* Mobile navigation spacing */
@media (max-width: 640px) {
  .nav-mobile {
    padding-left: max(1rem, env(safe-area-inset-left));
    padding-right: max(1rem, env(safe-area-inset-right));
  }

  /* Fixed bottom nav for mobile */
  .nav-bottom-fixed {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    padding-bottom: max(0.5rem, env(safe-area-inset-bottom));
    background: var(--bg-card);
    border-top: 1px solid var(--border);
    z-index: 50;
  }
}

/* Mobile modal/sheet styles */
@media (max-width: 640px) {
  .modal-mobile {
    max-height: calc(100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom));
    max-height: calc(100dvh - env(safe-area-inset-top) - env(safe-area-inset-bottom));
  }

  /* Bottom sheet style */
  .sheet-mobile {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    max-height: 90vh;
    max-height: 90dvh;
    border-radius: 1rem 1rem 0 0;
    padding-bottom: max(1rem, env(safe-area-inset-bottom));
  }
}

/* Mobile spacing utilities */
@media (max-width: 640px) {
  .px-mobile {
    padding-left: 1rem;
    padding-right: 1rem;
  }

  .mx-mobile-neg {
    margin-left: -1rem;
    margin-right: -1rem;
  }

  /* Full-bleed on mobile */
  .bleed-mobile {
    margin-left: calc(-1rem - env(safe-area-inset-left));
    margin-right: calc(-1rem - env(safe-area-inset-right));
    padding-left: calc(1rem + env(safe-area-inset-left));
    padding-right: calc(1rem + env(safe-area-inset-right));
  }
}

/* ===============================
   Dark Mode Contrast Fixes
   =============================== */

/* Improved text contrast in dark mode */
.dark .text-improved {
  color: #e5e5e5;
}

.dark .text-muted-improved {
  color: #a3a3a3;
}

/* Better border visibility in dark mode */
.dark .border-improved {
  border-color: #404040;
}

/* Improved placeholder contrast */
.dark input::placeholder,
.dark textarea::placeholder {
  color: #737373;
}

/* ===============================
   Loading States
   =============================== */

/* Skeleton with better shimmer */
@keyframes skeleton-shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.skeleton {
  background: linear-gradient(
    90deg,
    #f0f0f0 0%,
    #e0e0e0 50%,
    #f0f0f0 100%
  );
  background-size: 200% 100%;
  animation: skeleton-shimmer 1.5s ease-in-out infinite;
  border-radius: 4px;
}

.dark .skeleton {
  background: linear-gradient(
    90deg,
    #1f1f1f 0%,
    #2d2d2d 50%,
    #1f1f1f 100%
  );
  background-size: 200% 100%;
}

/* ===============================
   Reduced Motion Support
   =============================== */

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  .animate-pulse,
  .animate-spin,
  .animate-bounce,
  .skeleton-shimmer,
  .skeleton {
    animation: none !important;
  }
}

/* ===============================
   Dynamic Viewport Units (Mobile Safari)
   =============================== */

/* Full height accounting for mobile browser chrome */
.h-screen-dynamic {
  height: 100vh;
  height: 100dvh;
}

.min-h-screen-dynamic {
  min-height: 100vh;
  min-height: 100dvh;
}

.max-h-screen-dynamic {
  max-height: 100vh;
  max-height: 100dvh;
}

/* Small viewport (browser chrome visible) */
.h-screen-small {
  height: 100vh;
  height: 100svh;
}

/* Large viewport (browser chrome hidden) */
.h-screen-large {
  height: 100vh;
  height: 100lvh;
}

/* ===============================
   Mobile Scroll Improvements
   =============================== */

/* Smooth momentum scrolling on iOS */
.scroll-smooth-ios {
  -webkit-overflow-scrolling: touch;
  overflow-y: auto;
}

/* Horizontal scroll container for mobile */
.scroll-x-mobile {
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  scroll-snap-type: x mandatory;
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.scroll-x-mobile::-webkit-scrollbar {
  display: none;
}

.scroll-x-mobile > * {
  scroll-snap-align: start;
  flex-shrink: 0;
}

/* Prevent body scroll when modal open */
.body-scroll-lock {
  overflow: hidden;
  position: fixed;
  width: 100%;
  height: 100%;
}

/* ===============================
   Mobile Performance Optimizations
   =============================== */

/* GPU acceleration for smooth animations */
.gpu-accelerated {
  transform: translateZ(0);
  will-change: transform;
  backface-visibility: hidden;
}

/* Contain layout for performance */
.contain-layout {
  contain: layout;
}

.contain-paint {
  contain: paint;
}

.contain-strict {
  contain: strict;
}

/* ===============================
   Landscape Mode Adjustments
   =============================== */

@media (orientation: landscape) and (max-height: 500px) {
  /* Compact UI for landscape phones */
  .landscape-compact {
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
  }

  .landscape-hide {
    display: none !important;
  }

  /* Smaller touch targets acceptable in landscape */
  .landscape-touch-sm {
    min-height: 36px;
    min-width: 36px;
  }
}

/* ===============================
   Print Styles (often forgotten for mobile)
   =============================== */

@media print {
  /* Hide interactive elements */
  button,
  .nav-bottom-fixed,
  .touch-target,
  [role="button"] {
    display: none !important;
  }

  /* Ensure readable text */
  body {
    font-size: 12pt;
    line-height: 1.5;
    color: #000;
    background: #fff;
  }

  /* Prevent page breaks inside cards */
  .news-card {
    break-inside: avoid;
    page-break-inside: avoid;
  }
}

/* ===============================
   VISUAL DETAILS - Subtle Improvements
   =============================== */

/* A. Line accent for headlines */
.headline-accent::after {
  content: '';
  display: block;
  width: 48px;
  height: 3px;
  background: var(--accent, #1d4ed8);
  margin-top: 1rem;
  border-radius: 2px;
}

/* B. Gradient text for high news values */
.text-gradient-warm {
  background: linear-gradient(135deg, #dc2626, #ea580c);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.text-gradient-cool {
  background: linear-gradient(135deg, #2563eb, #7c3aed);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* C. Subtle grain texture overlay */
.grain-overlay::before {
  content: '';
  position: fixed;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  opacity: 0.02;
  pointer-events: none;
  z-index: 9999;
}

.dark .grain-overlay::before {
  opacity: 0.03;
}

/* D. Borderless card style */
.card-borderless {
  background: rgba(255, 255, 255, 0.5);
  backdrop-filter: blur(8px);
  transition: background-color 0.2s ease;
}

.card-borderless:hover {
  background: rgba(255, 255, 255, 0.8);
}

.dark .card-borderless {
  background: rgba(22, 27, 34, 0.5);
}

.dark .card-borderless:hover {
  background: rgba(22, 27, 34, 0.8);
}

/* E. Elegant divider */
.divider-elegant {
  border: none;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(0,0,0,0.1), transparent);
}

.dark .divider-elegant {
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
}
